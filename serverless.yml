service: mayu-photo-delivery

provider:
  name: aws
  runtime: python3.7
  region: ap-northeast-1
  stage: stg
  environment: ${file(./env/${opt:stage, self:provider.stage}.yml)}

plugins:
  - serverless-offline
  - serverless-python-requirements

custom:
  scheduleEnabled:
    prod: true
    stg: false
    local: false

functions:
  send_photos:
    handler: photo_deliver.send_photos
    events:
      - http:
          path: linebot/send_photos
          method: post
      - schedule:
          rate: cron(30 3 * * ? *)
          enabled: ${self:custom.scheduleEnabled.${opt:stage, self:provider.stage}}
